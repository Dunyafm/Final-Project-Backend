@model  Paginate<ProductListVM>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int count = ((Model.CurrentPage - 1) * 10) + 1;
}

<link rel="canonical" href="https://v5.getbootstrap.com/docs/5.0/examples/carousel/">

<!-- ICONS FOR LINKS -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
      integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">


<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
      integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
        integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>

<link href="~/assets/css/product.css" rel="stylesheet">

<main>

    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="./assets/img/slider/show-forhercreed.jpg" alt="">

                <div class="container">
                    <div class="carousel-caption text-left">
                        <h1>AY SONUNA KİMİ</h1>
                        <p>50 % endirimlər davam edir</p>
                        <p><a class="btn btn-lg btn-primary" asp-controller="home" asp-action="index" role="button">Sifariş et</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img src="~/assets/img/slider/versace-Crystal-series.jpg" alt="">

                <div class="container">
                    <div class="carousel-caption">
                        <h1></h1>
                        <p></p>
                        <p><a class="btn btn-lg btn-primary" asp-controller="Productdetail" asp-action="index" role="button">Sifariş et</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img src="~/assets/img/slider/Sephora_Fragrance.jpg" alt="">

                <div class="container">
                    <div class="carousel-caption text-right">
                        <h1>1+1 kampaniya başladi!!!</h1>
                        <p></p>
                        <p><a class="btn btn-lg btn-primary" asp-controller="product" asp-action="index" role="button">Yeni kolleksiya</a></p>
                    </div>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>


    <div class="container marketing">

        <div class="row">
            <div class="col-lg-4">
                <img src="~/assets/img/catergories/women-catergory.jpg" width="170" height="200"
                     aria-label="Placeholder: 140x140" alt="">

                <h2>QADIN</h2>

                <p><a style="font-size:large" class="btn btn-secondary" asp-controller="womenshop" asp-action="index" role="button">Sifarişə başla  &raquo;</a></p>
            </div>
            <div class="col-lg-4">
                <img src="~/assets/img/catergories/mefor.jpg" width="170" height="200" aria-label="Placeholder: 140x140"
                     alt="">


                <h2>KİŞİ</h2>

                <p><a style="font-size:large" class="btn btn-secondary" asp-controller="menshop" asp-action="index" role="button">Sifarişə başla  &raquo;</a></p>
            </div>
            <div class="col-lg-4">
                <img src="~/assets/img/catergories/unisex-catergory.jpg" width="170" height="200"
                     aria-label="Placeholder: 140x140" alt="">

                <h2>UNISEX</h2>

                <p><a style="font-size:large" class="btn btn-secondary" asp-controller="unisexshop" asp-action="index" role="button">Sifarişə başla &raquo;</a></p>
            </div>
        </div>

    </div>


    <!-- ALL PRODUCTS START -->

    <section class="section-products">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-md-8 col-lg-6">
                    <div class="header">
                        <h2></h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- Single Product -->
                @foreach (var item in Model.Datas)
                {
                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div id="product-1" class="single-product">
                            <div class="part-1" style="background:url('assets/img/parfums/@item.Image') ; background-size:cover">
                                <div class="part-1">

                                    <ul>
                                        <li><a asp-controller="Product" asp-action="Detail"><i class="fas fa-info"></i></a></li>
                                        <form style="display:inline-block">
                                            <a data-id="@item.Id" class=" add-items ad-basket btn btn-sm"><i data-id="@item.Id" class="fas fa-shopping-cart"></i></a>
                                        </form>

                                    </ul>
                                </div>
                                <div class="part-2">
                                    <h2 class="product-header">KILIAN</h2>
                                    <h3 class="product-old-price">350₼</h3>
                                    <h4 class="product-price">300₼</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <!-- Single Product -->

            </div>
        </div>
        @*PAGINATION*@
        <div class="row my-3">
            <nav aria-label="...">
                <ul class="pagination">
                    <li class="page-item @(Model.HasPrevious ? "" : "disabled") ">
                        <a class="page-link" asp-action="Index" asp-route-page="@(Model.CurrentPage-1)">Previous</a>
                    </li>
                    @for (int i = 1; i <= Model.TotalPage; i++)
                    {
                        <li class="page-item @(i==Model.CurrentPage ? "disabled" : "")">
                            <a class="page-link" asp-action="Index" asp-route-page="@i">@i</a>
                        </li>
                    }
                    <li class="page-item @(Model.HasNext ? "" : "disabled")">
                        <a class="page-link" asp-action="Index" asp-route-page="@(Model.CurrentPage+1)">Next</a>
                    </li>
                </ul>
            </nav>
        </div>


    </section>

    <!-- ALL PRODUCTS END -->

    @section Script{
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            var btns = document.querySelectorAll(".ad-basket")
            console.log(btns)

            btns.forEach((val, i) => {

                val.addEventListener("click", function (e) {
                    e.preventDefault()

                    var id = this.getAttribute("data-id")


                    $.ajax({
                        url: "https://localhost:44334/product/AddBasket",
                        data: {
                            id: id
                        },
                        dataType: 'json',
                        type: "post",
                        success: function (data) {
                            Swal.fire({
                                position: 'center',
                                icon: 'success',
                                title: 'Uğurla əlavə edildi',
                                showConfirmButton: false,
                                timer: 1000
                            })
                        }
                    })
                })
            })
        </script>

    }

</main>

